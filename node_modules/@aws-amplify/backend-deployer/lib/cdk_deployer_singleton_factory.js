import { CDKDeployer } from './cdk_deployer.js';
import { CdkErrorMapper } from './cdk_error_mapper.js';
import { BackendLocator } from '@aws-amplify/platform-core';
/**
 * Factory to create a backend deployer
 */
export class BackendDeployerFactory {
    packageManagerController;
    formatter;
    static instance;
    /**
     * constructor - sets the packageManagerController
     */
    constructor(packageManagerController, formatter) {
        this.packageManagerController = packageManagerController;
        this.formatter = formatter;
    }
    /**
     * Returns a single instance of BackendDeployer
     */
    getInstance() {
        if (!BackendDeployerFactory.instance) {
            BackendDeployerFactory.instance = new CDKDeployer(new CdkErrorMapper(this.formatter), new BackendLocator(), this.packageManagerController);
        }
        return BackendDeployerFactory.instance;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RrX2RlcGxveWVyX3NpbmdsZXRvbl9mYWN0b3J5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2Nka19kZXBsb3llcl9zaW5nbGV0b25fZmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDaEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQWdDNUQ7O0dBRUc7QUFDSCxNQUFNLE9BQU8sc0JBQXNCO0lBT2Q7SUFDQTtJQVBYLE1BQU0sQ0FBQyxRQUFRLENBQThCO0lBRXJEOztPQUVHO0lBQ0gsWUFDbUIsd0JBQWtELEVBQ2xELFNBQXlDO1FBRHpDLDZCQUF3QixHQUF4Qix3QkFBd0IsQ0FBMEI7UUFDbEQsY0FBUyxHQUFULFNBQVMsQ0FBZ0M7SUFDekQsQ0FBQztJQUVKOztPQUVHO0lBQ0gsV0FBVztRQUNULElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxRQUFRLEVBQUU7WUFDcEMsc0JBQXNCLENBQUMsUUFBUSxHQUFHLElBQUksV0FBVyxDQUMvQyxJQUFJLGNBQWMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQ2xDLElBQUksY0FBYyxFQUFFLEVBQ3BCLElBQUksQ0FBQyx3QkFBd0IsQ0FDOUIsQ0FBQztTQUNIO1FBQ0QsT0FBTyxzQkFBc0IsQ0FBQyxRQUFRLENBQUM7SUFDekMsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQmFja2VuZElkZW50aWZpZXIsXG4gIHR5cGUgUGFja2FnZU1hbmFnZXJDb250cm9sbGVyLFxufSBmcm9tICdAYXdzLWFtcGxpZnkvcGx1Z2luLXR5cGVzJztcbmltcG9ydCB7IENES0RlcGxveWVyIH0gZnJvbSAnLi9jZGtfZGVwbG95ZXIuanMnO1xuaW1wb3J0IHsgQ2RrRXJyb3JNYXBwZXIgfSBmcm9tICcuL2Nka19lcnJvcl9tYXBwZXIuanMnO1xuaW1wb3J0IHsgQmFja2VuZExvY2F0b3IgfSBmcm9tICdAYXdzLWFtcGxpZnkvcGxhdGZvcm0tY29yZSc7XG5pbXBvcnQgeyBCYWNrZW5kRGVwbG95ZXJPdXRwdXRGb3JtYXR0ZXIgfSBmcm9tICcuL3R5cGVzLmpzJztcblxuZXhwb3J0IHR5cGUgRGVwbG95UHJvcHMgPSB7XG4gIHNlY3JldExhc3RVcGRhdGVkPzogRGF0ZTtcbiAgdmFsaWRhdGVBcHBTb3VyY2VzPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIERlcGxveVJlc3VsdCA9IHtcbiAgZGVwbG95bWVudFRpbWVzOiBEZXBsb3ltZW50VGltZXM7XG59O1xuXG5leHBvcnQgdHlwZSBEZXN0cm95UmVzdWx0ID0ge1xuICBkZXBsb3ltZW50VGltZXM6IERlcGxveW1lbnRUaW1lcztcbn07XG5cbmV4cG9ydCB0eXBlIERlcGxveW1lbnRUaW1lcyA9IHtcbiAgc3ludGhlc2lzVGltZT86IG51bWJlcjtcbiAgdG90YWxUaW1lPzogbnVtYmVyO1xufTtcblxuLyoqXG4gKiBJbnZva2VzIGFuIGludm9rYWJsZSBjb21tYW5kXG4gKi9cbmV4cG9ydCB0eXBlIEJhY2tlbmREZXBsb3llciA9IHtcbiAgZGVwbG95OiAoXG4gICAgYmFja2VuZElkOiBCYWNrZW5kSWRlbnRpZmllcixcbiAgICBkZXBsb3lQcm9wcz86IERlcGxveVByb3BzXG4gICkgPT4gUHJvbWlzZTxEZXBsb3lSZXN1bHQ+O1xuICBkZXN0cm95OiAoYmFja2VuZElkOiBCYWNrZW5kSWRlbnRpZmllcikgPT4gUHJvbWlzZTxEZXN0cm95UmVzdWx0Pjtcbn07XG5cbi8qKlxuICogRmFjdG9yeSB0byBjcmVhdGUgYSBiYWNrZW5kIGRlcGxveWVyXG4gKi9cbmV4cG9ydCBjbGFzcyBCYWNrZW5kRGVwbG95ZXJGYWN0b3J5IHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEJhY2tlbmREZXBsb3llciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogY29uc3RydWN0b3IgLSBzZXRzIHRoZSBwYWNrYWdlTWFuYWdlckNvbnRyb2xsZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgcGFja2FnZU1hbmFnZXJDb250cm9sbGVyOiBQYWNrYWdlTWFuYWdlckNvbnRyb2xsZXIsXG4gICAgcHJpdmF0ZSByZWFkb25seSBmb3JtYXR0ZXI6IEJhY2tlbmREZXBsb3llck91dHB1dEZvcm1hdHRlclxuICApIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzaW5nbGUgaW5zdGFuY2Ugb2YgQmFja2VuZERlcGxveWVyXG4gICAqL1xuICBnZXRJbnN0YW5jZSgpOiBCYWNrZW5kRGVwbG95ZXIge1xuICAgIGlmICghQmFja2VuZERlcGxveWVyRmFjdG9yeS5pbnN0YW5jZSkge1xuICAgICAgQmFja2VuZERlcGxveWVyRmFjdG9yeS5pbnN0YW5jZSA9IG5ldyBDREtEZXBsb3llcihcbiAgICAgICAgbmV3IENka0Vycm9yTWFwcGVyKHRoaXMuZm9ybWF0dGVyKSxcbiAgICAgICAgbmV3IEJhY2tlbmRMb2NhdG9yKCksXG4gICAgICAgIHRoaXMucGFja2FnZU1hbmFnZXJDb250cm9sbGVyXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gQmFja2VuZERlcGxveWVyRmFjdG9yeS5pbnN0YW5jZTtcbiAgfVxufVxuIl19