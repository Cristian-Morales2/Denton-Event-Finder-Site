"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AccountIdFetcher = void 0;
const client_sts_1 = require("@aws-sdk/client-sts");
/**
 * Retrieves the account ID of the user
 */
class AccountIdFetcher {
    stsClient;
    /**
     * constructor for AccountIdFetcher
     */
    constructor(stsClient = new client_sts_1.STSClient()) {
        this.stsClient = stsClient;
    }
    fetch = async () => {
        const stsResponse = await this.stsClient.send(new client_sts_1.GetCallerIdentityCommand({}));
        if (stsResponse && stsResponse.Account) {
            return stsResponse.Account;
        }
        throw new Error('Cannot retrieve the account Id from GetCallerIdentityCommand');
    };
}
exports.AccountIdFetcher = AccountIdFetcher;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudF9pZF9mZXRjaGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3VzYWdlLWRhdGEvYWNjb3VudF9pZF9mZXRjaGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG9EQUEwRTtBQUUxRTs7R0FFRztBQUNILE1BQWEsZ0JBQWdCO0lBSUU7SUFIN0I7O09BRUc7SUFDSCxZQUE2QixZQUFZLElBQUksc0JBQVMsRUFBRTtRQUEzQixjQUFTLEdBQVQsU0FBUyxDQUFrQjtJQUFHLENBQUM7SUFDNUQsS0FBSyxHQUFHLEtBQUssSUFBSSxFQUFFO1FBQ2pCLE1BQU0sV0FBVyxHQUFHLE1BQU0sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQzNDLElBQUkscUNBQXdCLENBQUMsRUFBRSxDQUFDLENBQ2pDLENBQUM7UUFDRixJQUFJLFdBQVcsSUFBSSxXQUFXLENBQUMsT0FBTyxFQUFFO1lBQ3RDLE9BQU8sV0FBVyxDQUFDLE9BQU8sQ0FBQztTQUM1QjtRQUNELE1BQU0sSUFBSSxLQUFLLENBQ2IsOERBQThELENBQy9ELENBQUM7SUFDSixDQUFDLENBQUM7Q0FDSDtBQWhCRCw0Q0FnQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHZXRDYWxsZXJJZGVudGl0eUNvbW1hbmQsIFNUU0NsaWVudCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1zdHMnO1xuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgYWNjb3VudCBJRCBvZiB0aGUgdXNlclxuICovXG5leHBvcnQgY2xhc3MgQWNjb3VudElkRmV0Y2hlciB7XG4gIC8qKlxuICAgKiBjb25zdHJ1Y3RvciBmb3IgQWNjb3VudElkRmV0Y2hlclxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBzdHNDbGllbnQgPSBuZXcgU1RTQ2xpZW50KCkpIHt9XG4gIGZldGNoID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHN0c1Jlc3BvbnNlID0gYXdhaXQgdGhpcy5zdHNDbGllbnQuc2VuZChcbiAgICAgIG5ldyBHZXRDYWxsZXJJZGVudGl0eUNvbW1hbmQoe30pXG4gICAgKTtcbiAgICBpZiAoc3RzUmVzcG9uc2UgJiYgc3RzUmVzcG9uc2UuQWNjb3VudCkge1xuICAgICAgcmV0dXJuIHN0c1Jlc3BvbnNlLkFjY291bnQ7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdDYW5ub3QgcmV0cmlldmUgdGhlIGFjY291bnQgSWQgZnJvbSBHZXRDYWxsZXJJZGVudGl0eUNvbW1hbmQnXG4gICAgKTtcbiAgfTtcbn1cbiJdfQ==